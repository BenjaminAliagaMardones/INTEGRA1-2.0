{% if chat_messages %}
{% for message in chat_messages %}
<div class="mb-3 {% if message.sender == user %}text-end{% endif %}">
    <div class="d-inline-block text-start" style="max-width: 70%;">
        {% if message.sender != user %}
        <div class="mb-1">
            <small class="text-muted">
                <i class="bi bi-person-circle"></i>
                <strong>{{ message.sender.username }}</strong>
            </small>
        </div>
        {% endif %}

        <div
            class="p-3 rounded {% if message.sender == user %}bg-primary{% else %}bg-secondary bg-opacity-25{% endif %}">
            <p class="mb-1">{{ message.content }}</p>
            <small class="text-muted" style="font-size: 0.75rem;">
                <i class="bi bi-clock"></i> {{ message.created_at|date:"d/m/Y H:i" }}
            </small>
        </div>
    </div>
</div>
{% endfor %}
{% else %}
<div class="text-center text-muted py-5">
    <i class="bi bi-chat-text display-4 mb-3"></i>
    <p>No hay mensajes en este chat todavía.</p>
    <p>¡Sé el primero en escribir!</p>
</div>
{% endif %}